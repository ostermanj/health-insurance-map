!function(n,t){"use strict";"object"==typeof exports&&module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.PubSub=t()}("object"==typeof window&&window||this,function(){"use strict";function n(n){var t;for(t in n)if(n.hasOwnProperty(t))return!0;return!1}function t(n,t,r,o){var i,u=e[t],f=o?function(n,t,r){n(t,r)}:function(n,t,r){try{n(t,r)}catch(n){setTimeout(function(n){return function(){throw n}}(n),0)}};if(e.hasOwnProperty(t))for(i in u)u.hasOwnProperty(i)&&f(u[i],n,r)}function r(r,o,i,u){var f=function(n,r,e){return function(){var o=String(n),i=o.lastIndexOf(".");for(t(n,n,r,e);-1!==i;)i=(o=o.substr(0,i)).lastIndexOf("."),t(n,o,r)}}(r,o,u);return!!function(t){for(var r=String(t),o=Boolean(e.hasOwnProperty(r)&&n(e[r])),i=r.lastIndexOf(".");!o&&-1!==i;)i=(r=r.substr(0,i)).lastIndexOf("."),o=Boolean(e.hasOwnProperty(r)&&n(e[r]));return o}(r)&&(!0===i?f():setTimeout(f,0),!0)}var PubSub={},e={},o=-1;return PubSub.publish=function(n,t){return r(n,t,!1,PubSub.immediateExceptions)},PubSub.publishSync=function(n,t){return r(n,t,!0,PubSub.immediateExceptions)},PubSub.subscribe=function(n,t){if("function"!=typeof t)return!1;e.hasOwnProperty(n)||(e[n]={});var r="uid_"+String(++o);return e[n][r]=t,r},PubSub.unsubscribe=function(n){var t,r,o,i="string"==typeof n,u=!1;for(t in e)if(e.hasOwnProperty(t)){if(r=e[t],i&&r[n]){delete r[n],u=n;break}if(!i)for(o in r)r.hasOwnProperty(o)&&r[o]===n&&(delete r[o],u=!0)}return u},PubSub});